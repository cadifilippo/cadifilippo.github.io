<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Kibito iframe</title>
    <meta name="viewport" content="width=device-width," />
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: bisque;
      }
    </style>
    <script src="https://assets.taxdown.es/assets/documents/kibito.bundled.js"></script>
  </head>
  <body>
    <div id="container" class="container">
      <h2 id="title">Kibito Frame</h2>
    </div>

    <script>
      function sendMessageToRN(msg) {
        window.ReactNativeWebView.postMessage(JSON.stringify(msg));
      }

      // document.addEventListener('kbSimulateLater', e => {
      //   sendMessageToRN({
      //     eventType: 'kbSimulateLater',
      //     data: e,
      //   });
      // });

      // sendMessageToRN({ eventType: 'test', data: { name: 'Probando', status: false } });

      function createFilter({ token }) {
        try {
          const filter = document.createElement('smart-filter');
          filter.setAttribute('stage', 'dev');
          filter.setAttribute('preDG', 'true');
          filter.setAttribute('token', token);
          const container = document.getElementById('container');
          container.appendChild(filter);
        } catch (error) {
          sendMessageToRN({
            eventType: 'ERR',
            data: error,
          });
        }
      }

      onload = () => {
        sendMessageToRN({ eventType: 'ready' });
      };
    </script>
  </body>
</html>
